Our HTTP web servers are stateless which means that the sever doesn't know who we are when we make an HTTP request.

This is like the entire class passing me a note that says their favorite shell fish but not including their name on the note. I have the fish data, but I have no way of relating that data to the student.

## Cookies

Cookies allow us to store data in the browser and have that data sent back to the server with each request.

We used [cookie-parser](https://www.npmjs.com/package/cookie-parser) to store and retrieve cookies.

```js
const cookieParser = require('cookie-parser');
app.use(cookieParser());
```

```js
// Create a new cookie and send it to the browser
res.cookie("userID", user.userID);

...

// Get the cookie that was sent from the browser
const userID = req.cookies["userID"];
```

Cookies, are bundled bits of information that are generated by the server and stored on the browser. Every time the browser makes a request to a site, it sends that site's cookies back to the server. The server uses the information in the cookie to provide a customized user experience.

Cookies are not super secure though. For example, I managed to log in as don by simply changing the `userID` from `1` to `2`.
### Snippets

`cookie-parser`

```
GET shell-fish.com
COOKIE: some-data-that-tells-the-server-im-mee: sam
```

```
{
  userId: 1
}
```

```
const cookieParser = require('cookie-parser');
app.use(cookieParser());
```

```
if (user.password === password) {
  // logged in
  // send a cookie to the user 
  res.cookie('userId', user.userId);
  res.redirect('/');
} 

const userId = req.cookies['userId'];
```

## Sessions

Sessions are more secure than cookies. Sessions create an encrypted key that gets stored on the browser instead of the plain text data. You can then use the key to get the data you need.

### Snippets


We used [cookie-session](https://www.npmjs.com/package/cookie-session) to encrypt and store the user's ID in the browser.

```js
const cookieSession = require('cookie-session');
app.use(cookieSession({
  name: 'session',
  keys: [process.env.SECRET_KEY || 'dvelopment']
}));
```

```js
// Create a new session and send it to the browser
req.session.userID = user.userID;

...

// Get the session that was sent from the browser
const userID = req.session.userID;
```

```
{
  jfkasjdfkljalksjd : {
    userId: 1
  }
}
```

`cookie-session`

## Storing Passwords

Storing passwords as plain text is one of the most un secure (not insecure) things you can do as a web developer. 

Encryption: passing through an algorithm so it gets weird.

* Hashing: one way. Can't reverse the weirdness.
  - jazz hands -> als;k jvfliansudk789w59j -> ?
* Encrypting: two way. You can get it back to normal after.
  - jazz hands -> als;k jvfliansudk789w59j -> jazz hands

Hashing is a better option for storing passwords because there's no way to get back the original data. We used [`bcrypt`](https://www.npmjs.com/package/bcrypt) to has our passwords.


## Refactor

Create separate database tables for different pieces of data. A user table shouldn't contain all the data about memes, you should have a meme table for that. 

## Other

* Compass uses oauth for login instead of handling usernames and passwords directly. Here's an article on how oauth works: https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2